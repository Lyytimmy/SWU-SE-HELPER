
---

# 数据库设计文档：饮料装配自动化管理工厂

## 1. 简介

该数据库用于管理饮料装配自动化管理工厂的各项业务，包括订单调度、原料预测、流水线监控等功能。本文档将详细介绍数据库的各个方面，包括数据表结构、字段说明、关系约束等内容。

## 2. 数据表结构

### 2.1 drink_material

- **表说明：** 存储饮料原料信息。

| 列名        | 数据类型    | 是否为空 | 说明             |
| ----------- | ----------- | -------- | ---------------- |
| material_id | INT         | NOT NULL | 原料编号，主键   |
| material    | VARCHAR(50) | NULL     | 原料名称         |

### 2.2 infer_material

- **表说明：** 用于预测所需原料量。

| 列名     | 数据类型    | 是否为空 | 说明                   |
| -------- | ----------- | -------- | ---------------------- |
| year     | YEAR        | NULL     | 年份                   |
| month    | INT         | NULL     | 月份                   |
| material | INT         | NOT NULL | 原料编号，外键参考表1 |
| infer    | DOUBLE(255) | NULL     | 预测所需原料值         |
| consume  | DOUBLE(255) | NOT NULL | 消耗量                 |

### 2.3 `order`

- **表说明：** 订单类型表。

| 列名        | 数据类型     | 是否为空 | 说明                          |
| ----------- | ------------ | -------- | ----------------------------- |
| id          | INT          | NOT NULL | 订单ID，主键                  |
| type        | INT          | NULL     | 订单种类                      |
| type_name   | VARCHAR(20)  | NULL     | 订单种类名称                  |
| order_time  | DATE         | NULL     | 下单时间                      |
| ddl         | DATE         | NULL     | 交付时间                      |
| sum_time    | INT          | NULL     | 订单总时间容量                |
| remain_time | INT          | NULL     | 剩余时间                      |
| order_num   | INT          | NULL     | 订货数量                      |
| order_money | DECIMAL(10,5)| NULL     | 订单金额                      |
| progress    | FLOAT(3,2)   | NULL     | 完成进度，例如0.67            |
| material    | VARCHAR(255) | NULL     | 订单所需原料                  |
| status      | VARCHAR(10)  | NULL     | 当前订单状态（等候、处理中、已完成） |
| priority    | DOUBLE       | NULL     | 订单响应比                    |

### 2.4 belong_line_order

- **表说明：** 流水线处理历史订单信息。

| 列名     | 数据类型 | 是否为空 | 说明                       |
| -------- | -------- | -------- | -------------------------- |
| order_id | INT      | NOT NULL | 订单ID，主键，外键参考表3 |
| line_id  | INT      | NOT NULL | 流水线ID，外键参考表4     |

### 2.5 order_line

- **表说明：** 记录当前流水线处理的订单号。

| 列名         | 数据类型 | 是否为空 | 说明                    |
| ------------ | -------- | -------- | ----------------------- |
| id           | INT      | NOT NULL | 自增ID，主键            |
| line_id      | INT      | NOT NULL | 流水线ID                |
| order_id     | INT      | NULL     | 订单ID                  |
| predict_time | INT      | NULL     | 预计完成时间，订单总量/产能 |

### 2.6 user_info

- **表说明：** 用户信息表。

| 列名    | 数据类型   | 是否为空 | 说明       |
| ------- | ---------- | -------- | ---------- |
| id      | INT        | NOT NULL | 用户ID，主键 |
| user_id | VARCHAR(50)| NULL     | 用户标识   |
| name    | VARCHAR(50)| NOT NULL | 用户姓名   |
| tel     | VARCHAR(20)| NOT NULL | 电话号码   |
| factory | VARCHAR(20)| NULL     | 工厂名称   |
| image   | VARCHAR(255)| NULL     | 头像地址   |

### 2.7 user_login

- **表说明：** 用户登录信息表。

| 列名    | 数据类型   | 是否为空 | 说明          |
| ------- | ---------- | -------- | ------------- |
| id      | INT        | NOT NULL | 自增ID，主键 |
| name    | VARCHAR(30)| NOT NULL | 用户名        |
| user_id | VARCHAR(50)| NOT NULL | 用户标识      |
| pwd     | VARCHAR(20)| NULL     | 密码          |
| token   | VARCHAR(255)| NULL    | 登录令牌      |

## 3. 关系约束

- infer_material表中的material列与drink_material表中的material_id列相互关联，保证数据的一致性。
- `order`表中的type列与drink_info表中的drink_id列相互关联，保证数据的一致性。
- belong_line_order表中的order_id列与`order`表中的id列相互关联，保证数据的一致性。
- belong_line_order表中的line_id列与line表中的id列相互关联，保证数据的一致性。
- order_line表中的line_id列与line表中的id列相互关联，保证数据的一致性。
- order_line表中的order_id列与`order`表中的id列相互关联，保证数据的一致性。

## 4. 总结

本文档详细介绍了饮料装配自动化管理工厂数据库的设计，包括数据表结构、字段说明以及关系约束等内容。这些信息将有助于开发人员更好地理解和管理数据库，确保系统的稳定性和可靠性。

---

你可以根据实际情况修改和完善这份文档，确保它满足你的需求。